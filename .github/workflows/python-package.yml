# name: Python package

# on:
#   push:
#     branches: [ main ]

name: README Updater

on:
push:
  branches: [ master ]
pull_request:
  branches: [ master ]
schedule:
  - cron: "0 0 */1 * *"

jobs:
build:
  runs-on: ubuntu-latest
  steps:
  - uses: actions/checkout@v2
  - name: Set up Python 3.7
    uses: actions/setup-python@v2
    with:
      python-version: '3.7'
  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip
      pip install feedparser
  - name: Update README
    run: |
      python readme.py
  - name: Commit README
    run: |
      git pull
      git add .
      git diff
      git config --local user.email "action@gihtub.com"
      git config --local user.name "GitHub Action"
      git commit -m "Update README.md"
      git push
